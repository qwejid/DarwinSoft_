
# DarwinSoft API

DarwinSoft API — это веб-приложение, построенное на FastAPI, использующее PostgreSQL в качестве базы данных и Alembic для управления миграциями базы данных. Приложение предоставляет интерфейс для управления задачами и правами доступа к ним.

## Оглавление

- [Технологии](#технологии)
- [Установка](#установка)
- [Настройка окружения](#настройка-окружения)
- [Запуск приложения](#запуск-приложения)
- [Миграции базы данных](#миграции-базы-данных)
- [Документация API](#документация-api)
- [Тестирование](#тестирование)
- [Использование Poetry](#использование-poetry)

## Технологии

- Python 3.11
- FastAPI
- SQLAlchemy (asyncio)
- Alembic
- PostgreSQL
- Pydantic
- Uvicorn
- Dotenv
- pytest
- **Poetry** (для управления зависимостями)

## Установка

### С использованием Poetry

1. Установите [Poetry](https://python-poetry.org/docs/#installation):

   ```bash
   pip install poetry
   ```

2. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/qwejid/DarwinSoft_.git
   cd DarwinSoft
   ```

3. Установите зависимости, используя Poetry:

   ```bash
   poetry install
   ```

4. Активируйте виртуальное окружение:

   ```bash
   poetry shell
   ```

## Настройка окружения

1. Создайте файл `.env` в корне проекта и добавьте следующие переменные окружения:

   ```env
   DB_URL=postgresql+asyncpg://user:password@localhost/DarwinSoft
   SECRET_KEY=your_secret_key_here
   ACCESS_TOKEN_EXPIRE_MINUTES=30
   ```

   - `DB_URL`: URL для подключения к базе данных PostgreSQL.
   - `SECRET_KEY`: Секретный ключ для подписи JWT токенов.
   - `ACCESS_TOKEN_EXPIRE_MINUTES`: Время жизни JWT токена в минутах.

2. Убедитесь, что переменные окружения загружаются корректно перед запуском приложения.

## Запуск приложения

Запустите Uvicorn для запуска FastAPI приложения:

```bash
uvicorn app.main:app --reload
```

Приложение будет доступно по адресу `http://127.0.0.1:8000`.

## Миграции базы данных

Проект использует Alembic для управления миграциями базы данных. Для выполнения миграций:

1. Инициализация Alembic (если еще не выполнена):

   ```bash
   alembic init -t async alembic
   ```

2. Создание новой миграции:

   ```bash
   alembic revision --autogenerate -m "описание миграции"
   ```

3. Применение миграций:

   ```bash
   alembic upgrade head
   ```

## Документация API

FastAPI автоматически генерирует документацию API, которая доступна по следующим URL:

- Swagger UI: `http://127.0.0.1:8000/docs`
- ReDoc: `http://127.0.0.1:8000/redoc`

## Тестирование

Для запуска тестов:

1. Убедитесь, что в вашем проекте настроено тестовое окружение.
2. Запустите тесты с помощью:

   ```bash
   pytest
   ```

## Использование Poetry

### Добавление новых зависимостей

Чтобы добавить новую зависимость в проект, используйте команду:

```bash
poetry add <package_name>
```

### Обновление зависимостей

Чтобы обновить все зависимости до последних совместимых версий, выполните:

```bash
poetry update
```
